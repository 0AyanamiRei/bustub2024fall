因为后续我想在bustub的基础上做一些自己的改动, 所以从P3开始, 作为dbms的初学者, 我整体阅读一遍bustub的源码.

bustub的开机处在`/tools/shell/shell.cpp`中, 可以在这里查看:

> 创建实例 `auto bustub = std::make_unique<bustub::BusTubInstance>("test.bustub");`

后面可以再回来仔细地看一下**bustub::BusTubInstance**中有哪些成员, 大抵能够代表db有哪些组件(有一部分没有, 因为是学习用项目的原因)

> 生成 *__mock_txx* 表 `bustub->GenerateMockTable();`

> 生成*test_xxx*表 `bustub->GenerateTestTable();`

**注意**: *we don't support create / drop table and insert for now*

主体部分是两个循环: 

```c++
// 持续运行, 直到用户退出
while(true) {
  ...
  // 读取用户输入SQL语句
  while(true) {
    ...
    // linenoise库
    char *query_c_str = linenoise(line_prompt.c_str());
    ...
  }
  ...
  // 执行SQL命令
  bustub->ExecuteSql(query, writer);
  ...
}
```

对于处理用户的输入, 可以使用[linenoise开源库](https://github.com/antirez/linenoise)来读取, 也可以选择开启TTY使用标准输入读取(`std::getline`)

**重点是执行SQL语句**, 以SQL语句`SELECT * FROM __mock_table_1;`为例, 看看如何执行的.

