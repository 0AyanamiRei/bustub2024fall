这一讲的内容是关于多版本并发控制: ***Multi-Version Concurrency Control***, 是一个被广泛使用的技术.

## Multiversion Timestamp Ordering

## Multiversion Two-Phase Locking

## Snapshot Isolation (SI)

### 快照隔离的概念

快照隔离是一种并发控制机制，它为事务提供了一个数据库的*snapshot*，该快照是在事务开始执行时创建的。事务在这个快照上进行操作，与并发事务完全隔离。快照中的数据值仅包含已提交事务写入的值。

### 适用场景

- **只读事务**：快照隔离对只读事务非常理想，因为它们从不等待，也不会被并发控制管理器中止。

### 更新事务的处理

- **潜在冲突**：更新数据库的事务可能与其他更新数据库的事务发生冲突。
- **更新验证**：事务执行的更新必须在事务提交前进行验证。
- **私有工作区**：事务的更新保存在事务的私有工作区中，直到事务通过验证，此时更新才会写入数据库。

### 提交过程

当一个事务 T 被允许提交时，T 的状态转变为已提交状态，并且 **T 所做的所有更新必须作为一个原子操作写入数据库**。这样，任何为其他事务创建的快照要么包含事务 T 的所有更新，要么不包含任何更新。

### 总结

快照隔离通过为每个事务提供一个独立的数据库快照，确保了事务之间的隔离性。只读事务在这种隔离级别下可以高效执行，而更新事务则需要在提交前进行验证，以确保数据一致性。