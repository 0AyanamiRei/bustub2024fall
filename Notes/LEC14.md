# BOOK

查询优化是从多种可能的策略中选择最有效的查询评估计划的过程，尤其是对于复杂查询。用户不需要编写高效的查询，而是系统会构建一个最小化查询评估成本的计划。优化的一方面是在关系代数层面，系统寻找等效但更高效的表达式；另一方面是选择具体的处理策略，如执行操作的算法和使用的索引。好的策略和坏的策略在评估时间上的成本差异可能非常大，因此即使查询只执行一次，系统也值得花费大量时间选择一个好的处理策略。

关系代数运算规律:

1. $\sigma$操作, 即选择操作可交换: $\sigma_{\theta_2}(\sigma_{\theta_1})=\sigma_{\theta_1}(\sigma_{\theta_2})$
2. 在多个指标上的选择操作可以拆成等价的多个选择, 即$\sigma_{\theta_1 \land \theta_2} = \sigma_{\theta_2}(\sigma_{\theta_1})$
3. 多个投影操作最终只保留最后的投影
4. ....

这里涉及了挺多关系代数运算的化解和转化

# LEC

logical plan和physical plan, 后者带有更多更详细的静态信息

基于rules的优化和基于成本估计的优化, 比如这样一些规则, 可以用来重写逻辑计划

1. Projection Pushdown
2. Predicate Pushdown
3. Replace Cartesian Product
4. ...

教授也说了, 数据库优化器是一个很难的模块, 需要阅读大量的文章, 同时也需要时间的沉淀(拥有大量负载的优化策略), 搜索了一下, 发现现在AI4DB也大量集中在优化器上的, 对不同查询用不同的方式, 比如RL可以去做NP-Hard的Join选择等等, 感觉是一个很challenge的方向, 先留个心眼, 这里是搜到的一些资料:

1. https://zhuanlan.zhihu.com/p/40478975
2. https://zhuanlan.zhihu.com/p/413105655
3. ...